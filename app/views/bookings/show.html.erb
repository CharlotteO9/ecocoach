<div class="header-no-avatar">
  <div class="title-no-avatar">
    <h2><%= Challenge.find(@booking.challenge_id).name %></h2>
  </div>
</div>
<div class="container">
  <div class="mt-3 head">
    <div class="<%= Challenge.find(@booking.challenge_id).category.downcase %>-icon icons details">
      <i class="fa-solid <%= find_icon(Challenge.find(@booking.challenge_id).category) %> top-icon"></i>
    </div>
    <div class="description">
      <p><%= Challenge.find(@booking.challenge_id).description %></p>
    </div>
    <p>My Goal:</p>
    <div class="progress">
      <div class="progress-bar" role="progressbar" style="width: <%= @booking.goal %>%;" aria-valuenow="<%= @booking.goal %>" aria-valuemin="0" aria-valuemax="100"><%= @booking.goal %>%</div>
    </div>
  </div>
    <h4>Need some tips</h4>

  <ul class="mt-3 ps-0">
    <% @tips.each do |tip| %>
    <div class="cardtips">
      <div class="<%= Challenge.find(@booking.challenge_id).category.downcase %>-icon icons tipsimage ">
        <i class="fa-solid <%= find_icon(Challenge.find(@booking.challenge_id).category) %>"></i>
      </div>
      <li>
      <div class="info d-flex justify-content-between">
        <h5><strong><%= tip.name %></strong><br></h5>
        <% if tip.class == Tip %>
          <%= link_to tip_saved_tips_path(tip), data: {turbo_method: :post}, class:"tipsicon mt-2 me-2" do %>
            <i class="fa-regular fa-bookmark"></i>
          <% end %>
        <% else tip.class == Usertip %>
          <%= link_to usertip_saved_user_tips_path(tip), data: {turbo_method: :post}, class:"tipsicon mt-2 me-2" do %>
            <i class="fa-regular fa-bookmark"></i>
          <% end %>
        <% end %>
      </div>
      <p class="description desc-truncate" data-action="click->tips-card#revealDescription"><%= tip.description %></p>
      </li>
    </div>
    <% end %>
  </ul>

  <ul class="mt-3 ps-0">
    <% @all_saved_tips.each do |saved_tip| %>
    <div class="cardtips">
      <div class="<%= Challenge.find(@booking.challenge_id).category.downcase %>-icon icons tipsimage ">
        <i class="fa-solid <%= find_icon(Challenge.find(@booking.challenge_id).category) %>"></i>
      </div>
      <li>
        <% if saved_tip.class == SavedTip %>
          <div class="info d-flex justify-content-between">
            <h5><strong><%= saved_tip.tip.name %></strong><br></h5>
            <%= link_to saved_tip_path(saved_tip), data: {turbo_method: :delete}, class:"tipsicon mt-2 me-2" do %>
              <i class="fa fa-bookmark"></i>
            <% end %>
          </div>
          <p class="description desc-truncate" data-action="click->tips-card#revealDescription"><%= saved_tip.tip.description %></p>
        <% else saved_tip.class == SavedUserTip %>
          <div class="info d-flex justify-content-between">
            <h5><strong><%= saved_tip.usertip.name %></strong><br></h5>
            <%= link_to saved_user_tip_path(saved_tip), data: {turbo_method: :delete}, class:"tipsicon mt-2 me-2" do %>
              <i class="fa fa-bookmark"></i>
            <% end %>
          </div>
          <p class="description desc-truncate" data-action="click->tips-card#revealDescription"><%= saved_tip.usertip.description %><br></p>
        <% end %>
      </li>
    </div>
    <% end %>
  </ul>

  <div class="up-nav2">
    <% if @booking.status == false %>
      <% if policy(@booking).edit? %>
        <%= render "bookings/form", bookings: @booking %>
      <% end %>
      <div class="remove-challenge">
      <% if policy(@booking).destroy? %>
      <i class="fa-regular fa-trash-can"></i>
        <%= link_to 'Remove this challenge', booking_path(@booking), data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'} %>
      <% end %>
      </div>
    <% else %>
      <%= link_to "Redo this challenge", challenge_path(@retry_challenge) %>
    <% end %>
  </div>

</div>
