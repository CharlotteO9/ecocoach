<h1><%= Challenge.find(@booking.challenge_id).name %></h1>


<% if @booking.status == false %>
  <% if policy(@booking).edit? %>
    <%= render "bookings/form", bookings: @booking %>
  <% end %>
  <% if policy(@booking).destroy? %>
    <%= link_to 'Remove this challenge', booking_path(@booking), data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'} %>
  <% end %>
  <ul>
    <li><p>Category: <%= Challenge.find(@booking.challenge_id).category %></p></li>
    <li><p>Description: <%= Challenge.find(@booking.challenge_id).description %></p></li>
    <li><p>My Goal: <%= @booking.goal %></p></li>
  </ul>

  <h4>Need some tips</h4>

  <ul>
    <% @all_saved_tips.each do |tip| %>
      <li>
        <%= tip.tip.name %><br>
        <%= tip.tip.description %><br>
        <%= link_to "Unsave this tip", saved_tip_path(tip), data: {turbo_method: :delete} %></li>
    <% end %>
  </ul>

  <ul>
    <% @tips.each do |tip| %>
      <li>
        <%= tip.name %><br>
        <%= tip.description %><br>
        <%= link_to "Save this tip", tip_saved_tips_path(tip), data: {turbo_method: :post} %>    </li>
    <% end %>
  </ul>

<% else %>
  <%= link_to "Redo this challenge", challenge_path(@retry_challenge) %>
  <ul>
    <li><p>Category: <%= Challenge.find(@booking.challenge_id).category %></p></li>
    <li><p>Description: <%= Challenge.find(@booking.challenge_id).description %></p></li>
    <li><p>My Goal: <%= @booking.goal %></p></li>
  </ul>

  <h4>Need some tips</h4>

  <ul>
    <% @saved_tips.each do |save_tip| %>
      <li>
        <%= save_tip.tip.name %><br>
        <%= save_tip.tip.description %><br>
        <%= link_to "Unsave this tip", saved_tip_path(save_tip), data: {turbo_method: :delete} %></li>
    <% end %>
  </ul>

  <ul>
    <% @tips.each do |tip| %>
      <li>
        <%= tip.name %><br>
        <%= tip.description %><br>
        <%= link_to "Save this tip", tip_saved_tips_path(tip), data: {turbo_method: :post} %>    </li>
    <% end %>
  </ul>
<% end %>
